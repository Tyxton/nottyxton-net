<h3>>> Network Topology</h3>
		<pre class="ascii-art" style="font-size: 0.8rem; line-height: 1.2;">

		[ INTERNET ]
		     |
	       [ ISP BRIDGE ]
		     |
	    +-------=v=-------+---- [ VLAN 1: Default ] -- (Home Network)
	    |   UniFi UCG-M   |---- [ VLAN 2: Public ] -- (Nginx, Docker)
	    |   (UniFi OS)    |---- [ VLAN 3: Private ] -- (NAS, Docker, Proxmox, Backend)
	    +--------+--------+---- [ VLAN 4: Cameras ] -- (No Internet, No VLAN Access)
		     |
	    +-------=v=------+ ----> [ TrueNAS | VLAN 2 ] -- (Dell PowerEdge R510)
	    | UniFi USW-Lite | ----> [ Proxmox | VLANS 1-3 ] -- (Dell Precision 5810)
	    |(Managed Switch)| ----> [ Other Devices | VLAN 1 ]
	    +-------+--------+
		    |
	+-----------+-----------------+------------------------------+
	|                             |                              |
[ DK2 | VLAN 2 ]            [ DK3 | VLAN 3 ]                  [ MGT | VLAN 1 ]
- Proxmox VE                - Proxmox VE		      - Proxmox VE
- Docker (Nginx, Jellyfin)  - Docker (*Arr Stack, Nextcloud)  - Docker (Homepage, Vaultwarden, Homeassistant)
		</pre>
		<h3>>> Hardware Manifest</h3>
		<p>For a deeper dive into what is running in the homelab on a hardware level I've documented everything at <a href="#">/root/projects/hw/hw_manifest.html</a>
		<br>
        <h3>>> LOGIC_MANIFESTO: NETWORK_ISOLATION</h3>
        <p>To ensure security across the homelab, I implemented VLAN tagging:</p>
        <br>
                <h4>[VLAN_1] The Home Network</h4>
                <p>This is where all of the home devices sit, everything from my desktop, to my roku. As well as my roommates' devices.</p>
		<br>
		<p>This is also where the MGT node sits. which runs the Portainer Swarm.</p>
		<br>
            
                <h4>[VLAN_2] Public</h4>
                <p>This is where all of the public websites and services reside. All of the incoming requests are first proxied by Cloudflare, then sorted by Nginx Proxy Manager (NPM).</p>
		<br>
            
		<h4>[VLAN_3] Private</h4>
		<p>This is where all of the backend services reside including the NAS and *arr stack.</p>
		<br>
        
		<h4>[VLAN 4] Cameras</h4>
		<p>This is where the cameras reside on the network, there is no internet access, and no interVLAN access. Nothing comes in, nothing comes out. It is completely isolated from the rest of the network.</p>
		<br>
	
	<h3>>> FIREWALL_RULES: ROUTING_POLICIES</h3>
	<br>
		<h4>[DEFAULT DENY]</h4>
		<p>I have set up a rule that drops all inter-VLAN traffic.</p>
		<br>
		
                <h4>[PIN-HOLE ROUTING]</h4>
                <p>Instead of allowing DK2 to talk to all of DK3, I only allow the specific IP of the jellyfin container to talk to the specific ip of the NAS on the specific port required for NFS.</p>
                <br>
                
                <h4>[ISOLATE THE MANAGEMENT INTERFACE]</h4>
                <p>My Proxmox and TrueNAS GUIs are only accessible from a singular "Trusted" device on VLAN 1.</p>
                <br>
                
                <h4>[REVERSE PROXY AND CERTS]</h4>
                <p>NPM (in the "DMZ") is the <u>only</u> service that is able to listen in on :80 & :443. All of the routing is done via Let's Encrypt with a Cloudflare API. This allows for SSL certificates without opening ports to the internet unnessecarily.</p>
                <br>
                
                <h4>[CONTAINER HARDENING]</h4>
                <p>I use a Docker Socket Proxy to limit what API calls can be made in the event of a container breakout.</p>
		<p>Along with this, I use the Proxmox Datacenter firewall that restricts traffic at the virtual NIC before it even gets to my gateway.</p>
                <br>
                
	
    

        <h3>>> STORAGE_STRATEGY: DATA_INTEGRITY && NFS_HARDENING</h3>
        <p>Utilizing a <strong>3-2-1 Backup Rule</strong> managed via automated scripts:</p>
        <ul class="meta-list">
            <li>[HOT] ZFS Parity Drives on the TrueNAS installation.</li>
            <li>[WARM] Proxmox Backup Server (Offsite via Tailscale).</li>
            <li>[COLD] Certain crucial data is stored offsite, on physical media.</li>
        </ul>
	<br>
		<h4>[NFS EXPORT PERMISSIONS]</h4>
		<p>The exports for DK2 are <u>read-only.</u> That way Jellyfin can see and stream the media, but nothing can write to it. There is no reason that a publicly facing media player should have write or execute permissions to a NAS.</p>
		<br>
		
                <h4>[MAPROOT/MAPALL]</h4>
                <p>These are set to a non-privileged user, as you should never allow root access over NFS.</p>
                <br>
                
                <h4>[SEPERATE SHARES]</h4>
                <p>DK2 and DK3 do not use the same share, exports are created specifically for each node's usecase.</p>

<style>
    .meta-list {
    }
    .responsive-stack {
        display: grid;
        grid-template-columns: 1fr 1fr; /* Two columns on desktop */
        gap: 30px;
        margin-top: 20px;
    }

    /* THE MOBILE FIX: Stack everything when screen is narrow */
    @media (max-width: 850px) {
        .responsive-stack {
            grid-template-columns: 1fr;
        }
    }

    .table-container { width: 100%; overflow-x: auto; }
    .data-table { width: 100%; text-align: left; border-collapse: collapse; }
    .data-table th { color: var(--text-amber); border-bottom: 1px solid var(--phosphor-dim); }
    .online { color: #00ff00; font-weight: bold; }
    .instance-list { list-style: none; padding: 0; }
    .instance-list li { border-bottom: 1px dashed rgba(0,255,65,0.2); padding: 5px 0; }
</style>
